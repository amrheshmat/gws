@using TripBusiness.Ibusiness
@inject ILocalizationService _localizationService;
@{
    ViewData["Title"] = "Admin Page";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    var NumberOfUsers = ViewBag.NumberOfUsers;
    var NumberOfRoles = ViewBag.NumberOfRoles;
   // var NumberOfSuccessRequest = ViewBag.NumberOfSuccessRequest;
}

<div class="bg-primary pt-10 pb-21"></div>
<div class="mt-n22 px-6 container-fluid">
    <div class="row" style="margin-bottom:50px">
        <div class="col-lg-12 col-md-12 col-12">
            <div>
                <div class="d-flex justify-content-between align-items-center">
                    <div class="mb-2 mb-lg-0">
                        <h3 class="mb-0 text-white">@_localizationService.Localize("Statistics") </h3>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-12 col-md-4 col-lg-2 ">
            <div class="card" style=" margin: 10px 0px;">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div><h4 class="mb-0"><a href="Report/UserReport">users</a></h4></div>
                        <div class="icon-shape icon-md bg-light-primary text-primary rounded-2">
                            <i class="fa fa-user"></i>
                        </div>
                    </div>
                     <div>
                        <h1 class="fw-bold">@NumberOfUsers</h1>
                       @*  <p class="mb-0">
                            <span classname="text-dark me-2">@NumberOfSuccessRequest% </span>@_localizationService.Localize("Completed")
                        </p> *@
                    </div> 
                </div>
            </div>
        </div>
        <div class="col-sm-12 col-md-4 col-lg-2 ">
            <div class="card" style=" margin: 10px 0px;">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div><h4 class="mb-0"><a href="#">roles</a></h4></div>
                        <div class="icon-shape icon-md bg-light-primary text-primary rounded-2">
                            <i class="fa fa-lock"></i>
                        </div>
                    </div>
                    <div>
                        <h1 class="fw-bold">@NumberOfRoles</h1>
                        @* <p class="mb-0">
                        <span classname="text-dark me-2">@NumberOfSuccessRequest% </span>@_localizationService.Localize("Completed")
                        </p> *@
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" style="margin-bottom:50px">
        <div class="col-md-6 col-xs-12" style="margin:10px 0px;">
            <div id="myPlot" style="width:100%;max-width:700px;background-color:red!important;"></div>
        </div>
        <div class="col-md-6 col-xs-12" style="margin:10px 0px;">
            <div id="myPlot2" style="width:100%;max-width:700px"></div>
        </div>
    </div>
</div>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
    $(document).ready(function () {
        $.ajax({
            url: "/admin/chart/",
            method: 'GET',
            success: function (info) {
                const xArray = ["users", "roles","languages"];
                const yArray = info;

                const layout = {
                    title:  "just for sample", 
                    font: {
                        color: '#c0bcbc',   // 👈 Global font color (tick labels, legend, etc.)
                        family: 'Verdana',
                        size: 14
                    },
                    xaxis: {
                        title: 'X Axis',
                        linecolor: '#c0bcbc',       // 👈 Line along the x-axis
                    },
                    yaxis: {
                        title: 'Y Axis',
                        linecolor: '#c0bcbc',      // 👈 Line along the y-axis
                    },
                paper_bgcolor: '#2b2c40', // entire figure background
                plot_bgcolor: '#2b2c40',
                };

                const data = [{ labels: xArray, values: yArray, type: "pie" }];
                Plotly.newPlot("myPlot", data, layout);

                const data2 = [{
                    x: xArray,
                    y: yArray,
                    type: "bar",
                    orientation: "v",//h
                    marker: {
                        color: ['red', 'blue', 'green'] // different color for each bar
                    }
                }];

                Plotly.newPlot("myPlot2", data2, layout);

            },
            error: function (xhr, status, error) {
                console.error('Error fetching data:', error);
            }
        });
    });
</script>