@using TripBusiness.Ibusiness
@model MWS.Data.Entities.Seo;
@inject ILocalizationService _localizationService;
@{
    ViewData["Title"] = "Admin Page";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    var days = ViewBag.days;
    var seo = ViewBag.seo;
    var languages = ViewBag.languages;
    var activities = ViewBag.activities;
}
    
<!-- Modal -->
@using (Html.BeginForm("Add", "Seo", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.TextBoxFor(m => m.seoId, new { value = "@seo.seoId", @id = "seoId", @class = "form-control", style = "display:none" })
    <div class="container" style="margin-top:100px;width:85%;">
        <div class="row">
            <div class="col-xs-12 col-md-4" style="margin:20px 0px;">
                <label class="form-label" for="title">
                            @_localizationService.Localize("title")
                </label>
                        @Html.TextBoxFor(m => m.title, new {  @id = "title", @class = "form-control"})
                <span id="titleRequired" style="color:red"></span>
            </div>
            <div class="col-xs-12 col-md-4" style="margin:20px 0px;">
                <label class="form-label" for="description">
                    @_localizationService.Localize("Description")
                </label>
                @Html.TextBoxFor(m => m.description, new { @id = "description", @class = "form-control" })
                <span id="descriptionRequired" style="color:red"></span>
            </div>
            <div class="col-xs-12 col-md-4" style="margin:20px 0px;">
                <label class="form-label" for="keyWords">
                            @_localizationService.Localize("keyWords")
                </label>
                        @Html.TextBoxFor(m => m.keyWords, new { @id = "keyWords", @class = "form-control" })
                <span id="keyWordsRequired" style="color:red"></span>
            </div>
            <div class="col-xs-12 col-md-4" style="margin:20px 0px;">
                        <label class="form-label" for="viewport">
                            @_localizationService.Localize("viewport")
                </label>
                        @Html.TextAreaFor(m => m.viewport, new { @id = "viewport", @class = "form-control" })
                        <span id="viewportRequired" style="color:red"></span>
            </div>
            <div>
                <button type="submit" class="btn btn-primary" id="addSeoBtn">@_localizationService.Localize("Save")</button>
            </div>
        </div>
    </div>
   
}


<script>
    $(document).ready(function () {
        $(document).on('change', '#language', function () {
            $("#languageId").val($(this).val());
        });
        $('#addSeoBtn').on("click", function (e) {
            e.preventDefault();
            //validation
            if ($("#title").val() == '') {
                $("#titleRequired").text("required");
                return false;
            } else {
                $("#titleRequired").text("");
            }
            if ($("#description").val() == '') {
                $("#descriptionRequired").text("required");
                return false;
            } else {
                $("#descriptionRequired").text("");
            }
            if ($("#keyWords").val() == '') {
                    $("#keyWordsRequired").text("required");
                return false;
            } else {
                $("#keyWordsRequired").text("");
            }
            if ($("#viewport").val() == '') {
                $("#viewportRequired").text("required");
                return false;
            } else {
                $("#viewportRequired").text("");
            }
            
        var id = $("#seoId").val();
            var seo = {};
            seo.seoId = id;
            seo.title = $("#title").val();
            seo.description = $("#description").val();
            seo.keyWords = $("#keyWords").val();
            seo.viewport = $("#viewport").val();
            $.ajax({
                url: "/Seo/Edit",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify(seo),
                success: function (data) {
                    if (data.status == true) {
                        Swal.fire({
                            title: data.title,
                            text: data.message,
                            icon: "success",
                            timer: 1500
                        });
                        setTimeout(function () {
                            location.reload();
                        }, 1500);
                    } else {
                        Swal.fire({
                            title: data.title,
                            text: data.message,
                            icon: "error",
                            timer: 1500
                        });
                    }
                }
            });
        });
    });
</script>